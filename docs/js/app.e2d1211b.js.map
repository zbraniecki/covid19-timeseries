{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/components/Dashboard.vue?db4c","webpack:///./src/components/Controls.vue?c939","webpack:///./src/components/DataTable.vue?60d7","webpack:///./src/types/index.ts","webpack:///./src/App.vue?4ff1","webpack:///./src/components/Dashboard.vue?7c81","webpack:///./src/components/DataTable.vue?c9c3","webpack:///./src/helpers/index.ts","webpack:///src/components/DataTable.vue","webpack:///./src/components/DataTable.vue?79c9","webpack:///./src/components/DataTable.vue","webpack:///./src/components/Chart.vue?a098","webpack:///src/components/Chart.vue","webpack:///./src/components/Chart.vue?0295","webpack:///./src/components/Chart.vue","webpack:///./src/components/Controls.vue?82db","webpack:///src/components/Controls.vue","webpack:///./src/components/Controls.vue?c10b","webpack:///./src/components/Controls.vue","webpack:///src/components/Dashboard.vue","webpack:///./src/components/Dashboard.vue?ee63","webpack:///./src/components/Dashboard.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/store/index.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Presentation","DataType","View","TaxonomyLevel","_vm","this","_h","$createElement","_c","_self","staticRenderFns","attrs","presentation","tableKey","class","chrome","isChrome","style","staticClass","_l","region","id","_v","_s","_e","item","row","relDay","log","ref","refInFor","date","today","isToday","normalized","backgroundColor","color","todayRow","numFormat","Intl","NumberFormat","undefined","percFormat","enums","keys","myEnum","values","entries","map","entry","default","input","getKey","getTypeValue","dataType","key2","val","getValuesForDateIdx","idx","point","dates","getValue","selection","dataTypes","view","Delta","totalSelection","getSelectionForView","Total","prev","EMA","total","total3EMA","calculateEMA","total7EMA","Population","mainSelection","getSelectionForDataTypes","mainValue","divideByPopulation","dataPoint","meta","population","Math","round","getLatestValue","mainDataType","latest","formatValue","nf","format","getHighestValue","highest","assign","sortData","regions","regionIds","sort","a","b","regionA","regionB","valueA","valueB","isNaN","parseData","regionId","parseDate","searchTokens","generateSearchTokens","year","month","day","split","chunk","parseInt","Error","Date","tokens","Set","addSearchTokensForLevel","Country","State","County","City","Array","from","join","toLowerCase","level","code","add","token","nFormatter","num","digits","si","symbol","rx","toFixed","replace","getNormalizedIndex","state","firstValue","relativeZero","dtValue","interpolateColor","color1","color2","factor","isSameDay","date1","date2","getDate","getMonth","getFullYear","someDate","setDate","getCountNDaysSinceTheLast","days","len","lastValueIdx","vector","getClosestRoundedNumber","str","toString","pow","floor","range","prevTotal","k","isRegionIncluded","searchQuery","taxonomyLevels","includes","taxonomy","cases","sentiment","deaths","active","tested","recovered","hospitalized","metaRowsCount","legendColumn","computed","selectedRegions","$store","getters","nameRow","activeMetaRows","helpers","dataRows","lastRegion","lastRegionNorm","navigator","userAgent","cssVars","updated","$nextTick","$refs","scrollIntoView","mounted","component","draw","watch","methods","svg","selectAll","remove","attr","width","height","append","xAxis","yAxis","_m","directives","rawName","expression","on","$event","$$selectedVal","filter","target","options","selected","_value","multiple","domProps","dataType2","autoNormalizedValue","normalizationValue","setNormalizationValue","composing","regionSearchText","clearSearch","setSelectedRegions","nameAndValue","selectedTaxonomyLevels","setTaxonomyLevel","presentations","dataTypes2","views","regionList","sortedRegions","set","dt","commit","setView","e","checked","components","DataTable","Chart","Controls","Table","Dashboard","DATASET","updateQueryString","params","URLSearchParams","history","replaceState","document","location","pathname","hash","getUserPreferences","search","getAll","getSelection","Cases","use","Store","controls","sortedRegionIds","earliest","minValue","normalizedIndexes","selectedRegionIds","filteredRegions","mutations","setPresentation","setData","setDataTypes","setTaxonomyLevels","actions","strict","config","productionTip","store","render","h","$mount"],"mappings":"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","file":"js/app.e2d1211b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=473fe4b2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=473fe4b2&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=style&index=0&id=b2db4954&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=style&index=0&id=b2db4954&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTable.vue?vue&type=style&index=0&id=c79cfd28&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTable.vue?vue&type=style&index=0&id=c79cfd28&scoped=true&lang=css&\"","export enum Presentation {\n  Table = \"table\",\n  Chart = \"chart\"\n}\n\nexport enum DataType {\n  Cases = \"cases\",\n  Deaths = \"deaths\",\n  Active = \"active\",\n  Recovered = \"recovered\",\n  Tested = \"tested\",\n  Hospitalized = \"hospitalized\",\n  Population = \"population\"\n}\n\nexport enum View {\n  Total = \"total\",\n  Delta = \"delta\",\n  EMA = \"ema\"\n}\n\nexport enum TaxonomyLevel {\n  Country = \"country\",\n  State = \"state\",\n  County = \"county\",\n  City = \"city\"\n}\n\nexport interface Selection {\n  presentation: Presentation | null;\n  regions: RegionIds;\n  dataTypes: Array<DataType>;\n  normalizationValue: number | null;\n  view: View | null;\n  taxonomyLevels: Array<TaxonomyLevel>;\n}\n\nexport interface Values {\n  cases: number;\n  deaths: number;\n  active?: number;\n  recovered?: number;\n  tested?: number;\n}\n\nexport interface DataPoint {\n  date: Date;\n  value: Values;\n}\n\nexport interface Region {\n  id: string;\n  dates: Array<DataPoint>;\n  latest: Values;\n  highest: Values;\n  meta: {\n    country: {\n      code?: string;\n      name?: string;\n    };\n    state: {\n      code?: string;\n      name?: string;\n    };\n    county: {\n      code?: string;\n      name?: string;\n    };\n    city: {\n      code?: string;\n      name?: string;\n    };\n    population?: number;\n    taxonomy: TaxonomyLevel;\n  };\n  displayName: string;\n  searchTokens?: string;\n}\n\nexport interface State {\n  controls: {\n    views: Array<Presentation>;\n  };\n  selection: Selection;\n  sortedRegionIds: RegionIds;\n}\n\nexport type Regions = { [key: string]: Region; };\nexport type RegionList = Array<Region>;\nexport type RegionIds = Array<string>;\n\n/* Inputs */\n\nexport interface SelectionInput {\n  presentation: Presentation | null;\n  regions: RegionIds;\n  dataTypes: Array<DataType>;\n  normalizationValue: number | null;\n  view: View | null;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('dashboard')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"dashboard\"}},[_c('main',[(_vm.presentation == _vm.tableKey)?_c('data-table',{attrs:{\"id\":\"dataTable\"}}):_c('chart',{attrs:{\"id\":\"chart\"}})],1),_c('aside',[_c('controls')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',{class:{ chrome: _vm.isChrome },style:(_vm.cssVars),attrs:{\"cellspacing\":\"0\",\"cellpadding\":\"0\"}},[_c('thead',[_c('tr',{staticClass:\"name\"},[_c('th'),_vm._l((_vm.nameRow),function(region){return _c('th',{key:region.id,attrs:{\"colspan\":\"2\"}},[_vm._v(_vm._s(region.name))])}),(_vm.legendColumn)?_c('th',{staticClass:\"legend\"}):_vm._e()],2),_vm._l((_vm.activeMetaRows),function(item){return _c('tr',{key:item.id,class:item.id},[_c('th',[_vm._v(_vm._s(item.name)+\":\")]),_vm._l((item.values),function(value){return _c('th',{attrs:{\"colspan\":\"2\"}},[_vm._v(_vm._s(value))])}),(_vm.legendColumn)?_c('th',{staticClass:\"legend\"}):_vm._e()],2)}),_c('tr',[_c('th',[_vm._v(\"Δ Day\")]),_vm._l((_vm.selectedRegions),function(region){return [_c('th',{staticClass:\"date\"},[_vm._v(\"Date\")]),_c('th',{staticClass:\"value\"},[_vm._v(\"#\")])]}),(_vm.legendColumn)?_c('th',{staticClass:\"legend\"}):_vm._e()],2)],2),_c('tbody',_vm._l((_vm.dataRows),function(row){return _c('tr',{key:row.relDay,class:{ log: row.relDay < 0 }},[_c('td',{staticClass:\"relDay\",attrs:{\"title\":\"Click here to center\"}},[_c('a',{ref:'day' + row.relDay,refInFor:true,staticClass:\"target\",attrs:{\"name\":'day' + row.relDay}}),_c('a',{attrs:{\"href\":'#day' + row.relDay}},[_vm._v(_vm._s(row.relDay))])]),_vm._l((row.dates),function(date){return [(date)?[_c('td',{class:{\n              date: date,\n              today: date.isToday,\n              normalized: date.normalized\n            }},[_vm._v(_vm._s(date.date))]),_c('td',{staticClass:\"value\",class:{ normalized: date.normalized },style:(date.normalized ? {} : { backgroundColor: date.color })},[_vm._v(_vm._s(date.value))])]:[_c('td',{staticClass:\"empty\"}),_c('td',{staticClass:\"empty\"})]]}),(_vm.legendColumn)?_c('td',{staticClass:\"legend\"},[_vm._v(_vm._s(row.relDay == 0 ? \"← Normalized relative day\" : row.relDay == _vm.todayRow ? \"← Today\" : \"\"))]):_vm._e()],2)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {\n  Selection,\n  Region,\n  State,\n  DataType,\n  DataPoint,\n  Regions,\n  RegionIds,\n  Values,\n  TaxonomyLevel,\n  View,\n} from \"@/types\";\n\nconst numFormat = new Intl.NumberFormat(undefined);\nconst percFormat = new Intl.NumberFormat(undefined, { style: \"percent\" });\n\nexport default {\n  enums: {\n    keys<T>(myEnum: T): (keyof T)[] {\n      return Object.keys(myEnum) as any;\n    },\n    values<T>(myEnum: T): Array<any> {\n      return Object.values(myEnum) as any;\n    },\n    entries<T>(myEnum: T): { id: keyof T; name: string }[] {\n      return Object.entries(myEnum).map((entry) => {\n        return { id: entry[1], name: entry[0] };\n      });\n    },\n    default<T>(myEnum: T): T {\n      return (Object.keys(myEnum)[0] as unknown) as T;\n    },\n    get<T>(myEnum: T, input: string | null): any | null {\n      return null;\n    },\n    getKey<T>(myEnum: T): string {\n      return (myEnum as unknown) as string;\n    },\n  },\n  getTypeValue(values: Values, dataType: DataType): number | null {\n    const key: string = this.enums.getKey(dataType);\n    const key2: keyof Values = key as keyof Values;\n    const val = values[key2];\n    if (val === undefined) {\n      return null;\n    }\n    return val;\n  },\n  getValuesForDateIdx(region: Region, idx: number): DataPoint | null {\n    const point = region.dates[idx];\n    if (point === undefined) {\n      return null;\n    } else {\n      return point;\n    }\n  },\n  getValue(region: Region, idx: number, selection: Selection): number | null {\n    const dataTypes = selection.dataTypes;\n    const view = selection.view;\n\n    if (view === View.Delta) {\n      const totalSelection = this.getSelectionForView(selection, View.Total);\n      const value = this.getValue(region, idx, totalSelection);\n      if (value === null) {\n        return value;\n      }\n      const prev = this.getValue(region, idx - 1, totalSelection);\n      if (prev === null) {\n        return null;\n      } else if (prev === value) {\n        return 0;\n      } else {\n        if (prev === 0) {\n          return 1;\n        }\n        return value / prev - 1;\n      }\n    }\n\n    if (view === View.EMA) {\n      const totalSelection = this.getSelectionForView(selection, View.Total);\n      let total = this.getValue(region, idx, totalSelection);\n      if (total === null) {\n        return null;\n      }\n      const total3EMA = this.calculateEMA(region, idx, 3, totalSelection);\n      const total7EMA = this.calculateEMA(region, idx, 7, totalSelection);\n      if (total3EMA === null || total7EMA === null) {\n        return null;\n      }\n      return (total3EMA - total7EMA) / total;\n    }\n\n    if (dataTypes.length == 2 && dataTypes[1] == DataType.Population) {\n      const mainSelection = this.getSelectionForDataTypes(selection, [dataTypes[0]]);\n      const mainValue = this.getValue(\n        region,\n        idx,\n        mainSelection\n      );\n      return this.divideByPopulation(region, mainValue);\n    }\n\n    const dataType = dataTypes[0];\n    if (dataType === DataType.Population) {\n      return null;\n    }\n\n    const dataPoint = this.getValuesForDateIdx(region, idx);\n    if (dataPoint) {\n      return this.getTypeValue(dataPoint.value, dataTypes[0]);\n    }\n    return null;\n  },\n  divideByPopulation(region: Region, value: number | null): number | null {\n    if (!region.meta.population || value === null) {\n      return null;\n    }\n    return Math.round(value / (region.meta.population / 1000000));\n  },\n  getLatestValue(region: Region, selection: Selection): number | null {\n    const mainDataType = selection.dataTypes[0];\n    const idx = this.getTypeValue(region.latest, mainDataType);\n    if (!idx) {\n      return null;\n    }\n\n    return this.getValue(region, idx, selection);\n  },\n  formatValue(value: number | null, selection: Selection): string {\n    if (value === null) {\n      return \"\";\n    }\n    const nf = selection.view === View.Total ? numFormat : percFormat;\n    return nf.format(value);\n  },\n  getHighestValue(region: Region, selection: Selection): number | null {\n    const mainDataType = selection.dataTypes[0];\n    const value = this.getTypeValue(region.highest, mainDataType);\n\n    if (selection.dataTypes.length > 1 && selection.dataTypes[1] === \"population\") {\n      return this.divideByPopulation(region, value);\n    }\n    return value;\n  },\n  getSelectionForDataTypes(\n    selection: Selection,\n    dataTypes: Array<DataType>\n  ): Selection {\n    return Object.assign({}, selection, { dataTypes });\n  },\n  getSelectionForView(selection: Selection, view: View): Selection {\n    return Object.assign({}, selection, { view });\n  },\n  sortData(regions: Regions, regionIds: RegionIds, selection: Selection): void {\n    const totalSelection = this.getSelectionForView(selection, View.Total);\n    regionIds.sort((a: string, b: string) => {\n      const regionA = regions[a];\n      const regionB = regions[b];\n      const valueA = this.getLatestValue(regionA, totalSelection);\n      const valueB = this.getLatestValue(regionB, totalSelection);\n      if (valueA === null || isNaN(valueA)) {\n        return 1;\n      }\n      if (valueB === null || isNaN(valueB)) {\n        return -1;\n      }\n      return valueB - valueA;\n    });\n  },\n  parseData(regions: Regions): void {\n    for (const regionId in regions) {\n      const region = regions[regionId];\n      for (let idx = 0; idx < region.dates.length; idx++) {\n        const date = this.getValuesForDateIdx(region, idx);\n        if (date !== null) {\n          date.date = this.parseDate((date.date as unknown) as string);\n        }\n      }\n      region.searchTokens = this.generateSearchTokens(region);\n    }\n  },\n  parseDate(input: string): Date {\n    let year;\n    let month;\n    let day;\n\n    let i = 0;\n    for (const chunk of input.split(\"-\")) {\n      switch (i) {\n        case 0:\n          year = parseInt(chunk);\n          break;\n        case 1:\n          month = parseInt(chunk);\n          break;\n        case 2:\n          day = parseInt(chunk);\n          break;\n      }\n      i += 1;\n    }\n    if (year === undefined || month === undefined || day === undefined) {\n      throw new Error(`Failed to parse date: ${input}`);\n    }\n    const date = new Date(year, month - 1, day);\n    return date;\n  },\n  generateSearchTokens(region: Region): string {\n    const tokens: Set<string> = new Set();\n    this.addSearchTokensForLevel(tokens, region, TaxonomyLevel.Country);\n    this.addSearchTokensForLevel(tokens, region, TaxonomyLevel.State);\n    this.addSearchTokensForLevel(tokens, region, TaxonomyLevel.County);\n    this.addSearchTokensForLevel(tokens, region, TaxonomyLevel.City);\n\n    return Array.from(tokens)\n      .join(\" \")\n      .toLowerCase();\n  },\n  addSearchTokensForLevel(\n    tokens: Set<string>,\n    region: Region,\n    level: TaxonomyLevel\n  ): void {\n    const { code, name } = region.meta[level];\n    if (code !== undefined) {\n      tokens.add(code.toLowerCase());\n      if (name !== undefined) {\n        for (const token of name.toLowerCase().split(\" \")) {\n          tokens.add(token);\n        }\n      }\n    }\n  },\n  nFormatter(num: number | undefined, digits: number) {\n    if (num === undefined) {\n      return \"\";\n    }\n    const si = [\n      { value: 1, symbol: \"\" },\n      { value: 1e3, symbol: \" k\" },\n      { value: 1e6, symbol: \" M\" },\n      { value: 1e9, symbol: \" B\" },\n    ];\n    const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n    let i;\n    for (i = si.length - 1; i > 0; i--) {\n      if (num >= si[i].value) {\n        break;\n      }\n    }\n    return (num / si[i].value).toFixed(digits).replace(rx, \"$1\") + si[i].symbol;\n  },\n  getNormalizedIndex(\n    state: State,\n    region: Region,\n    value: number,\n    selection: Selection\n  ) {\n    const result = {\n      firstValue: null as null | number,\n      relativeZero: null as null | number,\n    };\n    for (let idx = 0; idx < region.dates.length; idx++) {\n      const dtValue = this.getValue(region, idx, selection);\n      if (result.firstValue === null && dtValue) {\n        result.firstValue = idx;\n      }\n      if (dtValue !== null && dtValue > value && idx > 0) {\n        result.relativeZero = idx - 1;\n        break;\n      }\n    }\n    if (result.relativeZero === null) {\n      result.relativeZero = region.dates.length - 1;\n    }\n    return result;\n  },\n  interpolateColor(\n    color1: Array<number>,\n    color2: Array<number>,\n    factor: number\n  ) {\n    const result = color1.slice();\n    for (let i = 0; i < 3; i++) {\n      result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\n    }\n    return `rgb(${result[0]}, ${result[1]}, ${result[2]})`;\n  },\n  isSameDay(date1: Date, date2: Date) {\n    return (\n      date1.getDate() == date2.getDate() &&\n      date1.getMonth() == date2.getMonth() &&\n      date1.getFullYear() == date2.getFullYear()\n    );\n  },\n  isToday(someDate: Date) {\n    const today = new Date();\n    today.setDate(today.getDate() - 1);\n    return this.isSameDay(today, someDate);\n  },\n  getCountNDaysSinceTheLast(\n    region: Region,\n    days: number,\n    selection: Selection\n  ): number | null {\n    const len = region.dates.length;\n    let lastValueIdx = null;\n\n    for (let idx = len; idx >= 0; idx--) {\n      if (this.getValue(region, idx, selection) !== null) {\n        lastValueIdx = idx;\n        break;\n      }\n    }\n    if (lastValueIdx === null) {\n      return null;\n    }\n\n    let vector = lastValueIdx;\n    for (let idx = lastValueIdx; idx >= 0 && lastValueIdx - days < idx; idx--) {\n      if (this.getValue(region, idx, selection) !== null) {\n        vector = idx;\n      }\n    }\n\n    return this.getValue(region, vector, selection);\n  },\n  getClosestRoundedNumber(input: number | null): number {\n    if (input === null) {\n      return 0;\n    }\n    const str = input.toString();\n    const digits = str.length;\n    const m = Math.pow(10, digits - 1);\n    return Math.floor(input / m) * m;\n  },\n  calculateEMA(\n    region: Region,\n    idx: number,\n    range: number,\n    selection: Selection\n  ): number | null {\n    let total = this.getValue(region, idx, selection);\n    if (total === null || idx < 1) {\n      return total;\n    }\n    let prevTotal = this.calculateEMA(region, idx - 1, range, selection);\n    if (!prevTotal) {\n      return total;\n    }\n\n    var k = 2 / (range + 1);\n    return total * k + prevTotal * (1 - k);\n  },\n  isRegionIncluded(region: Region, selection: Selection, searchQuery: string): boolean {\n    if (!selection.taxonomyLevels.includes(region.meta.taxonomy)) {\n      return false;\n    }\n    if (searchQuery.length > 0 && region.searchTokens !== undefined && !region.searchTokens.includes(searchQuery)) {\n      return false;\n    }\n    return true;\n  },\n};\n","<template>\n  <table cellspacing=\"0\" cellpadding=\"0\" :class=\"{ chrome: isChrome }\" :style=\"cssVars\">\n    <thead>\n      <tr class=\"name\">\n        <th></th>\n        <th v-for=\"region in nameRow\" :key=\"region.id\" colspan=\"2\">{{ region.name }}</th>\n        <th class=\"legend\" v-if=\"legendColumn\"></th>\n      </tr>\n      <tr v-for=\"item in activeMetaRows\" :key=\"item.id\" :class=\"item.id\">\n        <th>{{ item.name }}:</th>\n        <th v-for=\"value in item.values\" colspan=\"2\">{{ value }}</th>\n        <th class=\"legend\" v-if=\"legendColumn\"></th>\n      </tr>\n      <tr>\n        <th>Δ Day</th>\n        <template v-for=\"region in selectedRegions\">\n          <th class=\"date\">Date</th>\n          <th class=\"value\">#</th>\n        </template>\n        <th class=\"legend\" v-if=\"legendColumn\"></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"row in dataRows\" :key=\"row.relDay\" :class=\"{ log: row.relDay < 0 }\">\n        <td class=\"relDay\" title=\"Click here to center\">\n          <a v-bind:name=\"'day' + row.relDay\" class=\"target\" :ref=\"'day' + row.relDay\"></a>\n          <a :href=\"'#day' + row.relDay\">{{ row.relDay }}</a>\n        </td>\n        <template v-for=\"date of row.dates\">\n          <template v-if=\"date\">\n            <td\n              v-bind:class=\"{\n                date,\n                today: date.isToday,\n                normalized: date.normalized\n              }\"\n            >{{ date.date }}</td>\n            <td\n              class=\"value\"\n              v-bind:style=\"\n                date.normalized ? {} : { backgroundColor: date.color }\n              \"\n              :class=\"{ normalized: date.normalized }\"\n            >{{ date.value }}</td>\n          </template>\n          <template v-else>\n            <td class=\"empty\"></td>\n            <td class=\"empty\"></td>\n          </template>\n        </template>\n        <td\n          class=\"legend\"\n          v-if=\"legendColumn\"\n        >{{ row.relDay == 0 ? \"← Normalized relative day\" : row.relDay == todayRow ? \"← Today\" : \"\" }}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport helpers from \"@/helpers/index.ts\";\nimport { View, TaxonomyLevel } from \"@/types\";\n\nconst metaRows = [\n  {\n    id: \"state\",\n    name: \"State\"\n  },\n  {\n    id: \"country\",\n    name: \"Country\"\n  },\n  {\n    id: \"population\",\n    name: \"Popul.\"\n  }\n];\n\nconst dataTypeInfo = {\n  cases: {\n    sentiment: -1\n  },\n  deaths: {\n    sentiment: -1\n  },\n  active: {\n    sentiment: -1\n  },\n  tested: {\n    sentiment: 1\n  },\n  recovered: {\n    sentiment: 1\n  },\n  hospitalized: {\n    sentiment: -1\n  }\n};\n\nconst dtf = new Intl.DateTimeFormat(undefined, {\n  day: \"numeric\",\n  month: \"numeric\"\n});\n\nexport default {\n  name: \"data-table\",\n  data() {\n    return {\n      metaRowsCount: `78px`,\n      legendColumn: true,\n      todayRow: 8,\n    };\n  },\n  computed: {\n    selectedRegions() {\n      return this.$store.getters.selectedRegions;\n    },\n    nameRow() {\n      const selectedRegions = this.$store.getters.selectedRegions;\n      const result = new Array(selectedRegions.length);\n\n      for (const idx in selectedRegions) {\n        const region = selectedRegions[idx];\n        switch (region.meta.taxonomy) {\n          case TaxonomyLevel.Country: {\n            result[idx] = {\n              id: region.id,\n              name: region.meta.country.name,\n            };\n            break;\n          }\n          case TaxonomyLevel.State: {\n            result[idx] = {\n              id: region.id,\n              name: region.meta.state.name,\n            };\n            break;\n          }\n          case TaxonomyLevel.County: {\n            result[idx] = {\n              id: region.id,\n              name: region.meta.county.name,\n            };\n            break;\n          }\n          case TaxonomyLevel.City: {\n            result[idx] = {\n              id: region.id,\n              name: region.meta.city.name,\n            };\n            break;\n          }\n\n        }\n      }\n      return result;\n    },\n    activeMetaRows() {\n      const selectedRegions = this.$store.getters.selectedRegions;\n\n      const values = {};\n\n      for (const idx in selectedRegions) {\n        const region = selectedRegions[idx];\n        switch (region.meta.taxonomy) {\n          case TaxonomyLevel.Country: {\n            break;\n          }\n          case TaxonomyLevel.State: {\n            if (!values[\"country\"]) {\n              values[\"country\"] = new Array(selectedRegions.length);\n            }\n            values[\"country\"][idx] = region.meta.country.name;\n            break;\n          }\n          case TaxonomyLevel.County: {\n            if (!values[\"state\"]) {\n              values[\"state\"] = new Array(selectedRegions.length);\n            }\n            values[\"state\"][idx] = region.meta.state.name;\n            if (!values[\"country\"]) {\n              values[\"country\"] = new Array(selectedRegions.length);\n            }\n            values[\"country\"][idx] = region.meta.country.name;\n            break;\n          }\n          case TaxonomyLevel.City: {\n            if (!values[\"state\"]) {\n              values[\"state\"] = new Array(selectedRegions.length);\n            }\n            values[\"state\"][idx] = region.meta.state.name;\n            if (!values[\"country\"]) {\n              values[\"country\"] = new Array(selectedRegions.length);\n            }\n            values[\"country\"][idx] = region.meta.country.name;\n            break;\n          }\n        }\n        if (region.meta.population) {\n          if (!values[\"population\"]) {\n            values[\"population\"] = new Array(selectedRegions.length);\n          }\n          values[\"population\"][idx] = helpers.nFormatter(\n            region.meta.population,\n            2\n          );\n        }\n      }\n\n      let rowHeight = 19;\n      let rows = Object.keys(values).length + 1;\n      let x = 40 + (rowHeight * rows);\n      this.metaRowsCount = `-${x}px`;\n\n      const result = [];\n      for (const row of metaRows) {\n        if (values[row.id]) {\n          result.push({\n            id: row.id,\n            name: row.name,\n            values: values[row.id]\n          });\n        }\n      }\n      return result;\n    },\n    dataRows() {\n      const selectedRegions = this.$store.getters.selectedRegions;\n      const normalizedIndexes = this.$store.getters.normalizedIndexes;\n      const selection = this.$store.getters.selection;\n      const mainDataType = selection.dataTypes[0];\n      const allRegions = this.$store.getters.sortedRegions;\n\n      let maxDepth = 0;\n      let max = 0;\n\n      for (const region of selectedRegions) {\n        const normIndexes = normalizedIndexes[region.id];\n        if (normIndexes.firstValue === null) {\n          continue;\n        }\n        const relFirstValue = normIndexes.relativeZero - normIndexes.firstValue;\n        if (maxDepth < relFirstValue) {\n          maxDepth = relFirstValue;\n        }\n        const len = region.dates.length - normIndexes.relativeZero;\n        if (len > max) {\n          max = len;\n        }\n      }\n\n      const result = [];\n\n      const maxValue = selection.view !== View.Total ? 0.3 :\n        allRegions.length > 0 ? helpers.getHighestValue(selectedRegions[0], selection) : 0;\n\n      for (let idx = 0; idx < maxDepth + max; idx++) {\n        const relDay = idx - maxDepth;\n\n        const dates = [];\n\n        for (const region of selectedRegions) {\n          const normIndexes = normalizedIndexes[region.id];\n          const relFirstValue =\n            normIndexes.relativeZero - normIndexes.firstValue;\n          const regIdx = normIndexes.relativeZero + relDay;\n          if (\n            relDay + relFirstValue < 0 ||\n            regIdx >= region.dates.length ||\n            helpers.getValue(region, regIdx, selection) === null\n          ) {\n            dates.push(null);\n            continue;\n          } else {\n            const date = region.dates[regIdx].date;\n            const value = helpers.getValue(region, regIdx, selection);\n            const colorValue = value / maxValue;\n            const sentiment =\n              dataTypeInfo[mainDataType].sentiment == 1 && value > 0;\n            const maxColor = sentiment ? [0, 255, 0] : [255, 0, 0];\n            dates.push({\n              date: dtf.format(date),\n              value: helpers.formatValue(value, selection),\n              color: helpers.interpolateColor(\n                [255, 255, 255],\n                maxColor,\n                colorValue\n              ),\n              isToday: helpers.isToday(date),\n              normalized: relDay == 0\n            });\n          }\n        }\n\n        result.push({\n          relDay,\n          dates\n        });\n      }\n\n      {\n        const lastRegion = selectedRegions[selectedRegions.length - 1];\n        if (lastRegion) {\n          const lastRegionNorm = normalizedIndexes[lastRegion.id].relativeZero;\n          const lastDate = lastRegion.dates[lastRegion.dates.length - 1];\n          this.todayRow = lastRegion.dates.length - lastRegionNorm - 1;\n        }\n      }\n\n      return result;\n    },\n    isChrome() {\n      return navigator.userAgent.includes(\"Chrome/\");\n    },\n    cssVars() {\n      return {\n        '--meta-rows': this.metaRowsCount,\n      }\n    }\n  },\n  updated: function() {\n    this.$nextTick(function() {\n      if (this.$refs[\"day0\"] && this.$refs[\"day0\"][0]) {\n        this.$refs[\"day0\"][0].scrollIntoView();\n      }\n    });\n  },\n  mounted: function() {\n    this.$nextTick(function() {\n      if (this.$refs[\"day0\"] && this.$refs[\"day0\"][0]) {\n        this.$refs[\"day0\"][0].scrollIntoView();\n      }\n    });\n  }\n};\n</script>\n\n<style scoped>\ntable {\n  border-left: 1px solid #999999;\n  margin-left: 5px;\n  font-size: 0.9em;\n}\n\ntable:not(.chrome) {\n  /* Bug in Chrome prevents sticky header from being positioned properly. */\n  margin-bottom: 100vh;\n}\n\ntable td:nth-child(1),\ntable th:nth-child(1) {\n  border-right: 1px solid #999999;\n}\n\ntable td:nth-of-type(2n + 1),\ntable th:nth-of-type(2n + 1) {\n  border-right: 1px solid #999999;\n}\n\ntable th[colspan=\"2\"] {\n  border-right: 1px solid #999999;\n}\n\ntable th {\n  border-bottom: 1px solid #999999;\n  font-size: 0.8em;\n  color: #999999;\n  padding: 0 5px;\n}\n\ntable thead {\n  position: sticky;\n  top: 0;\n  background-color: white;\n  z-index: 10;\n}\ntable thead tr {\n  height: 18px;\n}\ntable thead tr:nth-child(1) {\n  height: 40px;\n}\n\ntable thead tr:nth-child(1) th {\n  font-size: 1.1em;\n  color: black;\n  padding: 5px 10px 0px 10px;\n  white-space: nowrap;\n}\n\ntable tbody td.relDay {\n  text-align: center;\n}\n\ntable tbody tr.log {\n  opacity: 0.5;\n}\n\ntable.chrome tbody tr.log {\n  /* Bug in Chrome prevents sticky header from being positioned properly. */\n  display: none;\n}\n\ntable tbody td:not(.empty) {\n  border-bottom: 1px solid #dddddd;\n}\n\ntable thead th {\n  padding: 1px 10px;\n}\n\ntable tbody td {\n  padding: 3px 10px;\n}\n\ntable tbody td.date,\ntable thead th.date {\n  color: #999999;\n  font-weight: bold;\n  font-size: 0.7em;\n  text-align: right;\n}\n\ntable td.today {\n  background-color: #ffffcc;\n}\n\ntable td.normalized {\n  background-color: rgb(221, 238, 255);\n}\n\ntable tbody td.value,\ntable thead th.value {\n  text-align: right;\n}\n\na.target {\n  display: block;\n  position: relative;\n  top: var(--meta-rows);\n  visibility: hidden;\n}\ntd.relDay {\n  padding: 0;\n}\n\ntd.relDay a[href] {\n  color: black;\n  text-decoration: none;\n  display: inline-block;\n  width: 100%;\n}\n\ntd.relDay:hover {\n  text-decoration: underline;\n  background-color: #eeeeee;\n}\n\nth.legend,\ntd.legend {\n  border: 0 !important;\n  opacity: 0.6;\n  white-space: nowrap;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataTable.vue?vue&type=template&id=c79cfd28&scoped=true&\"\nimport script from \"./DataTable.vue?vue&type=script&lang=js&\"\nexport * from \"./DataTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataTable.vue?vue&type=style&index=0&id=c79cfd28&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c79cfd28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"id\":\"chartSvg\",\"width\":\"100%\",\"height\":\"100%\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg id=\"chartSvg\" width=\"100%\" height=\"100%\" />\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"chart\",\n  computed: {\n    selectedRegions() {\n      return this.$store.getters.selectedRegions;\n    },\n    ...mapState([\"data\"])\n  },\n  mounted() {\n    const selected = this.$store.getters.selectedRegions;\n    let result = selected[0];\n    if (result) {\n      this.draw(result);\n    }\n  },\n  watch: {\n    selectedRegions(newValue) {\n      const selected = this.$store.getters.selectedRegions;\n      let result = selected[0];\n      if (result) {\n        this.draw(result);\n      }\n    },\n    data(newValue) {\n      let data = newValue;\n      if (!data.length) {\n        return;\n      }\n      data = data[0];\n      if (data) {\n        this.draw(data);\n      }\n    }\n  },\n  methods: {\n    draw(region) {\n      const height = 500;\n      const width = 500;\n      const margin = { top: 20, right: 30, bottom: 30, left: 60 };\n      const dataType = this.$store.getters.selection.dataTypes[0];\n\n      const svg = d3.select(\"#chart\");\n      svg.selectAll(\"*\").remove();\n      svg.attr(\"viewBox\", [0, 0, width, height]);\n\n      const x = d3\n        .scaleUtc()\n        .domain(d3.extent(region.dates, d => new Date(d.date)))\n        .range([margin.left, width - margin.right]);\n      const y = d3\n        .scaleLinear()\n        .domain([0, d3.max(region.dates, d => d.value[dataType])])\n        .nice()\n        .range([height - margin.bottom, margin.top]);\n\n      const xAxis = g =>\n        g.attr(\"transform\", `translate(0,${height - margin.bottom})`).call(\n          d3\n            .axisBottom(x)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        );\n      const yAxis = g =>\n        g\n          .attr(\"transform\", `translate(${margin.left},0)`)\n          .call(d3.axisLeft(y))\n          .call(g => g.select(\".domain\").remove());\n      const line = d3\n        .line()\n        .defined(d => !isNaN(d.value[dataType]))\n        .x(d => x(new Date(d.date)))\n        .y(d => y(d.value[dataType]));\n      svg.append(\"g\").call(xAxis);\n      svg.append(\"g\").call(yAxis);\n      svg\n        .append(\"path\")\n        .datum(region.dates)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"stroke-linejoin\", \"round\")\n        .attr(\"stroke-linecap\", \"round\")\n        .attr(\"d\", line);\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chart.vue?vue&type=template&id=0f7989ee&scoped=true&\"\nimport script from \"./Chart.vue?vue&type=script&lang=js&\"\nexport * from \"./Chart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f7989ee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menu\"}},[_vm._m(0),_c('label',{attrs:{\"for\":\"dataTypeSelect\"}},[_vm._v(\"Type:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataType),expression:\"dataType\"}],attrs:{\"id\":\"dataTypeSelect\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.dataType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.dataTypes),function(dataType){return _c('option',{domProps:{\"value\":dataType.id}},[_vm._v(\" \"+_vm._s(dataType.name)+\" \")])}),0),_c('label',{attrs:{\"for\":\"dataType2Select\"}},[_vm._v(\"Per:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dataType2),expression:\"dataType2\"}],attrs:{\"id\":\"dataType2Select\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.dataType2=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.dataTypes2),function(dataType){return _c('option',{domProps:{\"value\":dataType.id}},[_vm._v(\" \"+_vm._s(dataType.name)+\" \")])}),0),_c('label',{attrs:{\"for\":\"viewSelect\"}},[_vm._v(\"View:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.view),expression:\"view\"}],attrs:{\"id\":\"viewSelect\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.view=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.views),function(view){return _c('option',{domProps:{\"value\":view.id}},[_vm._v(_vm._s(view.name))])}),0),_c('label',{attrs:{\"for\":\"normalizeInput\"}},[_vm._v(\"Normalize:\")]),_c('input',{attrs:{\"type\":\"text\",\"placeholder\":_vm.autoNormalizedValue,\"id\":\"normalizeInput\"},domProps:{\"value\":_vm.normalizationValue},on:{\"change\":_vm.setNormalizationValue}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.regionSearchText),expression:\"regionSearchText\"}],staticClass:\"regionSearch\",attrs:{\"placeholder\":\"Search...\"},domProps:{\"value\":(_vm.regionSearchText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.regionSearchText=$event.target.value}}}),_c('input',{staticClass:\"clearRegionSearch\",attrs:{\"type\":\"button\",\"value\":\"x\"},on:{\"click\":_vm.clearSearch}}),_c('select',{ref:\"regionSelect\",staticClass:\"regions\",attrs:{\"multiple\":\"\"},on:{\"change\":_vm.setSelectedRegions}},_vm._l((_vm.regionList),function(region){return _c('option',{key:region.id,domProps:{\"value\":region.id,\"selected\":_vm.selectedRegions.includes(region.id)}},[_vm._v(_vm._s(region.nameAndValue))])}),0),_vm._l((_vm.taxonomyLevels),function(level){return [_c('label',{attrs:{\"for\":level.id + 'Level'}},[_vm._v(_vm._s(level.name)+\":\")]),_c('input',{attrs:{\"id\":level.id + 'Level',\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selectedTaxonomyLevels.includes(level.id),\"value\":level.id},on:{\"change\":_vm.setTaxonomyLevel}})]})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"links\"},[_c('a',{attrs:{\"href\":\"https://github.com/zbraniecki/covid19-timeseries\"}},[_vm._v(\"Source: \"),_c('img',{staticClass:\"icon\",attrs:{\"src\":\"/github.png\"}})]),_vm._v(\" | \"),_c('a',{attrs:{\"href\":\"https://coronadatascraper.com/\"}},[_vm._v(\"Data: \"),_c('img',{staticClass:\"icon\",attrs:{\"src\":\"/cds.svg\"}})]),_vm._v(\" | \"),_c('a',{attrs:{\"href\":\"https://twitter.com/Nathan510edge\"}},[_vm._v(\"Idea: \"),_c('img',{staticClass:\"icon\",attrs:{\"src\":\"/twitter.webp\"}}),_vm._v(\"Nathan510edge\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"menu\">\n    <p class=\"links\">\n      <a href=\"https://github.com/zbraniecki/covid19-timeseries\">Source: <img src=\"/github.png\" class=\"icon\"/></a> |\n      <a href=\"https://coronadatascraper.com/\">Data: <img src=\"/cds.svg\" class=\"icon\"/></a> |\n      <a href=\"https://twitter.com/Nathan510edge\">Idea: <img src=\"/twitter.webp\" class=\"icon\"/>Nathan510edge</a>\n    </p>\n    <!-- <label for=\"presentationSelect\">Presentation:</label>\n    <select id=\"presentationSelect\" v-model=\"presentation\">\n      <option v-for=\"presentation of presentations\" :value=\"presentation.id\">{{ presentation.name }}</option>\n    </select> -->\n    <label for=\"dataTypeSelect\">Type:</label>\n    <select id=\"dataTypeSelect\" v-model=\"dataType\">\n      <option v-for=\"dataType of dataTypes\" :value=\"dataType.id\">\n        {{ dataType.name }}\n      </option>\n    </select>\n    <label for=\"dataType2Select\">Per:</label>\n    <select id=\"dataType2Select\" v-model=\"dataType2\">\n      <option v-for=\"dataType of dataTypes2\" :value=\"dataType.id\">\n        {{ dataType.name }}\n      </option>\n    </select>\n    <label for=\"viewSelect\">View:</label>\n    <select id=\"viewSelect\" v-model=\"view\">\n      <option v-for=\"view of views\" :value=\"view.id\">{{ view.name }}</option>\n    </select>\n    <label for=\"normalizeInput\">Normalize:</label>\n    <input\n      type=\"text\"\n      :value=\"normalizationValue\"\n      v-on:change=\"setNormalizationValue\"\n      :placeholder=\"autoNormalizedValue\"\n     id=\"normalizeInput\"\n    />\n    <input class=\"regionSearch\" v-model=\"regionSearchText\" placeholder=\"Search...\" />\n    <input class=\"clearRegionSearch\" type=\"button\" value=\"x\" @click=\"clearSearch\" />\n    <select multiple @change=\"setSelectedRegions\" class=\"regions\" ref=\"regionSelect\">\n      <option\n        v-for=\"region of regionList\"\n        :value=\"region.id\"\n        :key=\"region.id\"\n        :selected=\"selectedRegions.includes(region.id)\"\n      >{{ region.nameAndValue }}</option>\n    </select>\n    <template v-for=\"level in taxonomyLevels\">\n          <label :for=\"level.id + 'Level'\">{{ level.name }}:</label>\n      <input\n        :id=\"level.id + 'Level'\"\n        type=\"checkbox\"\n        :checked=\"selectedTaxonomyLevels.includes(level.id)\"\n        :value=\"level.id\"\n        @change=\"setTaxonomyLevel\"\n      />\n    </template>\n  </div>\n</template>\n\n<script>\nimport helpers from \"@/helpers/index.ts\";\nimport { Presentation, DataType, View, TaxonomyLevel } from \"@/types\";\n\nexport default {\n  name: \"controls\",\n  data() {\n    return {\n      presentations: helpers.enums.entries(Presentation),\n      taxonomyLevels: helpers.enums.entries(TaxonomyLevel),\n      regionSearchText: \"\",\n      dataTypes: helpers.enums\n        .entries(DataType)\n        .filter(pres => pres.id != \"population\"),\n      dataTypes2: [\n        {\n          id: \"\",\n          name: \"\"\n        },\n        {\n          id: \"population\",\n          name: \"Population\"\n        }\n      ],\n      views: helpers.enums.entries(View)\n    };\n  },\n  computed: {\n    regionList() {\n      // Could consider performing this filtering elsewhere.\n      const searchQuery = this.regionSearchText.toLowerCase();\n      const selection = this.$store.getters.selection;\n      return this.$store.getters.sortedRegions.filter(region => helpers.isRegionIncluded(region, selection, searchQuery)).map(region => {\n        let value = helpers.getLatestValue(region, selection);\n        return {nameAndValue: `${region.displayName} -- ${helpers.formatValue(value, selection)}`, ...region};\n      });\n    },\n    selectedRegions() {\n      const selectedRegions = this.$store.getters.selectedRegions;\n      return selectedRegions.map(region => region.id);\n    },\n    normalizationValue() {\n      return this.$store.state.selection.normalizationValue;\n    },\n    autoNormalizedValue() {\n      return this.$store.getters.autoNormalizedValue;\n    },\n    dataType: {\n      get() {\n        return this.$store.getters.selection.dataTypes[0];\n      },\n      set(value) {\n        const dt = this.$store.getters.selection.dataTypes[1];\n        if (dt) {\n          this.$store.commit(\"setDataTypes\", [value, dt]);\n        } else {\n          this.$store.commit(\"setDataTypes\", [value]);\n        }\n      }\n    },\n    dataType2: {\n      get() {\n        return this.$store.getters.selection.dataTypes[1];\n      },\n      set(value) {\n        const dt = this.$store.getters.selection.dataTypes[0];\n\n        if (value) {\n          this.$store.commit(\"setDataTypes\", [dt, value]);\n        } else {\n          this.$store.commit(\"setDataTypes\", [dt]);\n        }\n      }\n    },\n    view: {\n      get() {\n        return this.$store.getters.selection.view;\n      },\n      set(value) {\n        this.$store.commit(\"setView\", value);\n      }\n    },\n    selectedTaxonomyLevels() {\n      return this.$store.getters.selection.taxonomyLevels;\n    },\n    presentation: {\n      get() {\n        return this.$store.getters.selection.presentation;\n      },\n      set(value) {\n        this.$store.commit(\"setPresentation\", value);\n      }\n    },\n  },\n  methods: {\n    setView(e) {\n      this.$store.commit(\"setView\", e.target.value);\n    },\n    setSelectedRegions(e) {\n      const selectedRegionIds = this.$store.getters.selection.regions;\n\n      const values = new Set(selectedRegionIds);\n      const visibleOptions = Array.from(e.target.options).filter(option => !option.classList.contains(\"filtered\"));\n      for (const option of visibleOptions) {\n        if (option.selected) {\n          values.add(option.value);\n        } else {\n          values.delete(option.value);\n        }\n      }\n      this.$store.commit(\"setSelectedRegions\", Array.from(values));\n    },\n    setNormalizationValue(e) {\n      if (e.target.value.length === 0) {\n        this.$store.commit(\"setNormalizationValue\", null);\n      } else {\n        const value = parseInt(e.target.value);\n        this.$store.commit(\"setNormalizationValue\", value);\n      }\n    },\n    clearSearch(e) {\n      this.regionSearchText = \"\";\n    },\n    setTaxonomyLevel(e) {\n      const id = e.target.value;\n      const checked = e.target.checked;\n      const taxonomyLevels = Array.from(this.$store.getters.selection.taxonomyLevels);\n      if (checked) {\n        taxonomyLevels.push(id);\n        this.$store.commit(\"setTaxonomyLevels\", taxonomyLevels);\n      } else {\n        this.$store.commit(\"setTaxonomyLevels\", taxonomyLevels.filter(l => l != id));\n      }\n    },\n  },\n  watch: {\n    selectedRegions(selectedRegionIds) {\n      const select = this.$refs[\"regionSelect\"];\n      for (let option of select.options) {\n        option.selected = selectedRegionIds.includes(option.value);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n#menu {\n  display: grid;\n  grid-template-columns: 2fr 1fr 1fr;\n  grid-template-rows: auto;\n  grid-column-gap: 0px;\n  grid-row-gap: 2px;\n  padding: 5px;\n}\n\nselect, input {\n  grid-column: 2 / 4;\n}\n\ninput[type=checkbox] {\n  grid-column: 3 / 4;\n}\n\nlabel {\n  grid-column: 1 / 2;\n}\n\n.regionSearch {\n  grid-column: 1 / 3;\n}\n\n.clearRegionSearch {\n  grid-column: 3 / 4;\n}\n\nselect.regions {\n  grid-column: 1 / 4;\n  height: 60vh;\n}\n\np.links {\n  grid-column: 1 / 4;\n  font-size: 0.7em;\n  text-align: center;\n  border-bottom: 1px solid #999999;\n  padding-bottom: 5px;\n}\n\np.links a {\n  text-decoration: none;\n}\n\nimg.icon {\n  height: 14px;\n  vertical-align: middle;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Controls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Controls.vue?vue&type=template&id=b2db4954&scoped=true&\"\nimport script from \"./Controls.vue?vue&type=script&lang=js&\"\nexport * from \"./Controls.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Controls.vue?vue&type=style&index=0&id=b2db4954&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2db4954\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"dashboard\">\n    <main>\n      <data-table id=\"dataTable\" v-if=\"presentation == tableKey\"></data-table>\n      <chart id=\"chart\" v-else></chart>\n    </main>\n    <aside>\n      <controls></controls>\n    </aside>\n  </div>\n</template>\n\n<script>\nimport DataTable from \"@/components/DataTable.vue\";\nimport Chart from \"@/components/Chart.vue\";\nimport Controls from \"@/components/Controls.vue\";\nimport { Presentation } from \"@/types\";\n\nexport default {\n  name: \"dashboard\",\n  components: {\n    DataTable,\n    Chart,\n    Controls\n  },\n  async mounted() {\n    const data = await fetch(\"/timeseries-converted.json\");\n    const json = await data.json();\n    this.$store.commit(\"setData\", json);\n  },\n  computed: {\n    presentation() {\n      return this.$store.getters.selection.presentation;\n    },\n    tableKey() {\n      return Presentation.Table;\n    }\n  }\n};\n</script>\n\n<style scoped>\n#dashboard {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 80% 20%;\n  grid-template-rows: 100%;\n  grid-column-gap: 0px;\n  grid-row-gap: 0px;\n}\n\nmain {\n  grid-area: 1 / 1 / 1 / 2;\n  overflow: auto;\n}\n\naside {\n  grid-area: 1 / 2 / 1 / 2;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=473fe4b2&scoped=true&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=473fe4b2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"473fe4b2\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport Dashboard from \"@/components/Dashboard.vue\";\n\n@Component({\n  components: {\n    Dashboard\n  }\n})\nexport default class App extends Vue {}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7d116fd9&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport helpers from \"@/helpers/index.ts\";\nimport {\n  Selection,\n  Region,\n  Presentation,\n  DataType,\n  Regions,\n  RegionList,\n  View,\n  State,\n  SelectionInput,\n  TaxonomyLevel\n} from \"@/types\";\n\nlet DATASET: Regions = {};\n\nVue.use(Vuex);\n\nfunction updateQueryString(state: any) {\n  const params = new URLSearchParams();\n  for (const id of state.selection.regions) {\n    params.append(\"region\", id);\n  }\n  for (const dataType of state.selection.dataTypes) {\n    if (dataType) {\n      params.append(\"dataType\", dataType);\n    }\n  }\n  if (state.selection.view) {\n    params.set(\"view\", state.selection.view);\n  }\n  if (state.selection.normalizationValue) {\n    params.set(\"normalize\", state.selection.normalizationValue);\n  }\n  window.history.replaceState(\n    {},\n    \"\",\n    `${document.location.pathname}?${params}${document.location.hash}`\n  );\n}\n\nfunction getUserPreferences(): SelectionInput {\n  const params = new URLSearchParams(document.location.search);\n  const dataTypes = params.getAll(\"dataType\") as Array<DataType>;\n  const view = params.get(\"view\") as View | null;\n  const normalizationValue = params.get(\"normalize\") as number | null;\n  const presentation = params.get(\"presentation\");\n  return {\n    presentation: helpers.enums.get(Presentation, presentation),\n    regions: params.getAll(\"region\"),\n    dataTypes,\n    view,\n    normalizationValue,\n  };\n}\n\nfunction getSelection(state: State): Selection {\n  return {\n    presentation: state.selection.presentation || Presentation.Table,\n    dataTypes:\n      state.selection.dataTypes.length > 0\n        ? state.selection.dataTypes\n        : [DataType.Cases],\n    view: state.selection.view || View.Total,\n    regions: state.selection.regions.length > 0 ? state.selection.regions : [],\n    normalizationValue: state.selection.normalizationValue,\n    taxonomyLevels: state.selection.taxonomyLevels,\n  };\n}\n\nconst params = getUserPreferences();\n\nexport default new Vuex.Store({\n  state: {\n    controls: {\n      views: helpers.enums.values(Presentation)\n    },\n    selection: {\n      presentation: params.presentation,\n      regions: params.regions,\n      dataTypes: params.dataTypes,\n      normalizationValue: params.normalizationValue,\n      view: params.view,\n      taxonomyLevels: [TaxonomyLevel.Country],\n    },\n    sortedRegionIds: [],\n  },\n  getters: {\n    autoNormalizedValue(state: State, getters): number {\n      const selectedRegions = getters.selectedRegions;\n      if (selectedRegions.length == 0) {\n        return 0;\n      }\n\n      const selection = helpers.getSelectionForView(\n        getters.selection,\n        View.Total\n      );\n      const earliest = [];\n      for (const region of selectedRegions) {\n        earliest.push(helpers.getCountNDaysSinceTheLast(region, 5, selection));\n      }\n\n      let minValue = null;\n      for (const val of earliest) {\n        if (val !== null && (minValue === null || minValue > val)) {\n          minValue = val;\n        }\n      }\n\n      return helpers.getClosestRoundedNumber(minValue);\n    },\n    normalizedIndexes(state, getters) {\n      const result: {\n        [key: string]: {\n          firstValue: number | null;\n          relativeZero: number | null;\n        };\n      } = {};\n\n      const selectedRegions = getters.selectedRegions;\n\n      if (selectedRegions.length == 0) {\n        return result;\n      }\n\n      let value: number | null = state.selection.normalizationValue;\n\n      if (value === null) {\n        value = getters.autoNormalizedValue;\n      }\n\n      const selection = helpers.getSelectionForView(\n        getters.selection,\n        View.Total\n      );\n      for (const region of selectedRegions) {\n        result[region.id] = helpers.getNormalizedIndex(\n          state,\n          region,\n          value as number,\n          selection\n        );\n      }\n\n      return result;\n    },\n    selectedRegions(state: State, getters): RegionList {\n      const result: RegionList = [];\n\n      const selection = getters.selection;\n      let selectedRegionIds = selection.regions;\n      const sortedRegions = getters.sortedRegions;\n\n      if (selectedRegionIds.length === 0) {\n\n        const filteredRegions = sortedRegions.filter((region: Region) => helpers.isRegionIncluded(region, selection, \"\")).slice(0, 7);\n        for (const region of filteredRegions) {\n          result.push(region);\n        }\n      } else {\n        for (const region of sortedRegions) {\n          if (selectedRegionIds.includes(region.id)) {\n            result.push(region);\n          }\n        }  \n      }\n      return result;\n    },\n    selection(state) {\n      return getSelection(state);\n    },\n    sortedRegions(state: State): RegionList {\n      const result: RegionList = [];\n\n      let sortedRegionIds = state.sortedRegionIds;\n\n      for (const regionId of sortedRegionIds) {\n        let region: Region | undefined = DATASET[regionId];\n        if (region !== undefined) {\n          result.push(region);\n        }\n      }\n\n      return result;\n    },\n  },\n  mutations: {\n    setPresentation(state, presentation: Presentation) {\n      state.selection.presentation = presentation;\n    },\n    setSelectedRegions(state, values) {\n      state.selection.regions = values;\n      updateQueryString(state);\n    },\n    setData(state, data) {\n      DATASET = data;\n      helpers.parseData(DATASET);\n  \n      const regionIds = Object\n        .values(DATASET)\n        // .filter((region: Region) => region.meta.taxonomy == \"country\")\n        .map((region: Region) => region.id);\n\n      const selection = getSelection(state);\n      helpers.sortData(DATASET, regionIds, selection);\n      state.sortedRegionIds = regionIds;\n    },\n    setDataTypes(state, dataTypes: Array<DataType>) {\n      state.selection.dataTypes = dataTypes;\n\n      const selection = getSelection(state);\n      helpers.sortData(DATASET, state.sortedRegionIds, selection);\n\n      updateQueryString(state);\n    },\n    setNormalizationValue(state, value) {\n      state.selection.normalizationValue = value;\n      updateQueryString(state);\n    },\n    setView(state, value) {\n      state.selection.view = value;\n      updateQueryString(state);\n    },\n    setTaxonomyLevels(state, value) {\n      state.selection.taxonomyLevels = value;\n    }\n  },\n  actions: {},\n  modules: {},\n  strict: true\n});\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport store from \"./store\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  store,\n  render: h => h(App)\n}).$mount(\"#app\");\n"],"sourceRoot":""}